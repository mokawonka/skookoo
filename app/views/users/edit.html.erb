<h3 class=pt-4> <%=image_tag('settings.svg', class: "header-icon")%>
My settings 
</h3>

<div id='allsettings'>

    <div class="row">

      <div class="offset-md-1 col-md-3">
        <div class="list-group" id="list-updaters" role="tablist">

          <a class="list-group-item list-group-item-action active" id="list-account-list" data-bs-toggle="list" href="#list-account" role="tab" aria-controls="list-account">
            My Account
          </a>

          <a class="list-group-item list-group-item-action" id="list-privacy-list" data-bs-toggle="list" href="#list-privacy" role="tab" aria-controls="list-privacy">
            Privacy
          </a>

          <a class="list-group-item list-group-item-action" id="list-notifications-list" data-bs-toggle="list" href="#list-notifications" role="tab" aria-controls="list-notifications">
            Notifications
          </a>

          <a class="list-group-item list-group-item-action" id="list-typography-list" data-bs-toggle="list" href="#list-typography" role="tab" aria-controls="list-typography">
            Typography
          </a>

          <a class="list-group-item list-group-item-action" id="list-subscription-list" data-bs-toggle="list" href="#list-subscription" role="tab" aria-controls="list-subscription">
            Subscription
          </a>

        </div>
      </div>


      <div class="col-md-8">
        <div class="tab-content" id="updaters">

          <div class="tab-pane fade show active" id="list-account" role="tabpanel" aria-labelledby="list-account-list">

            <p class='updater-title'>Change my username</p>
            <%= form_with(model: current_user, url: [current_user, :update_data], local: false) do |form| %>
                <div class="field">
                    <%= form.text_field :username, required: true, class: 'smallinput' %>
                </div>
                <div class="actions">
                    <%= form.submit "save", class: 'smallinput'%>
                </div>
            <% end %>

            <hr>

            <p class='updater-title'>Change my password</p>
            <%= form_with(model: current_user, url: [current_user, :update_data], local: false) do |form| %>
                <div class="field">
                    <%= form.password_field :password, placeholder: "password", required: true, class: 'smallinput' %>
                </div>
                <div class="field">
                    <%= form.password_field :password_confirmation, placeholder: "password confirmation", required: true, class: 'smallinput' %>
                </div>
                <div class="actions">
                    <%= form.submit "save", class: 'smallinput'%>
                </div>
            <% end %>

            <hr>
            
            <p class='updater-title'>Change my email address</p>
            <%= form_with(model: current_user, url: [current_user, :update_data], local: false) do |form| %>
                <div class="field">
                    <%= form.email_field :email, required: true, class: 'smallinput' %>
                </div>
                <div class="actions">
                    <%= form.submit "save", class: 'smallinput'%>
                </div>
            <% end %>

            <hr>

            <%= button_to 'Delete account', @user, method: :delete, class: "btn btn-sm btn-danger", data: {confirm: "Are you sure ? This cannot be undone."} %>

          </div>





          <div class="tab-pane fade" id="list-privacy" role="tabpanel" aria-labelledby="list-privacy-list">
            
            <p class='updater-title'>Private profile</p>

            <%= form_with(model: current_user, url: [current_user, :update_data], local: false) do |form| %>
              
              <div class="custom-toggle">
                <%= form.check_box :private_profile, id: "private_profile_toggle", onclick: "$('#submitprivateprofile').click();" %>
                <label for="private_profile_toggle" class="toggle-label">
                  <span class="toggle-slider"></span>
                </label>
                <span class="toggle-text">Enabled</span>
              </div>

              <%= form.submit "", id: "submitprivateprofile", class: 'd-none' %>
            <% end %>

          </div>






          <div class="tab-pane fade" id="list-notifications" role="tabpanel" aria-labelledby="list-notifications-list">
            
            <p class='updater-title'>Real-time notifications</p>

            <%= form_with(model: current_user, url: [current_user, :update_data], local: false) do |form| %>
              <div class="custom-toggle">
                <%= form.check_box :allownotifications, id: "allow_notifs_toggle", onclick: "$('#submitallownotifs').click();" %>
                <label for="allow_notifs_toggle" class="toggle-label">
                  <span class="toggle-slider"></span>
                </label>
                <span class="toggle-text">Enabled</span>
              </div>
              <%= form.submit "", id: "submitallownotifs", class: 'd-none'%>
            <% end %>

            <hr>
            
            <p class='updater-title'>Email notifications</p>

            <%= form_with(model: current_user, url: [current_user, :update_data], local: false) do |form| %>
              <div class="custom-toggle">
                <%= form.check_box :emailnotifications, id: "email_notifs_toggle", onclick: "$('#submitemailnotifs').click();" %>
                <label for="email_notifs_toggle" class="toggle-label">
                  <span class="toggle-slider"></span>
                </label>
                <span class="toggle-text">Enabled</span>
              </div>
              <%= form.submit "", id: "submitemailnotifs", class: 'd-none'%>
            <% end %>

          </div>







          <div class="tab-pane fade" id="list-typography" role="tabpanel" aria-labelledby="list-typography-list">
         
            <p class='updater-title'>Customize website font</p>

            <button type="button" class="btn dropdown-toggle gray" data-bs-toggle="dropdown" aria-expanded="false">
              Using 
              <% if current_user.font == 'League Spartan Bold'%>
                default
              <% else %>
                <%=current_user.font%>
              <% end %>
            </button>

            <ul id=fontlist class="dropdown-menu  dropdown-menu-start">
                <li><%= link_to 'Default', '#', value: 'League Spartan Bold', class: "dropdown-item font-choice", style: 'font-family: League Spartan Bold' %></li>

                <li><%= link_to 'Crimson Pro', '#', value: 'Crimson Pro', class: "dropdown-item font-choice", style: 'font-family: Crimson Pro' %></li>
                <li><%= link_to 'Crimson Pro Bold', '#', value: 'Crimson Pro Bold', class: "dropdown-item font-choice", style: 'font-family: Crimson Pro Bold' %></li>
                <li><%= link_to 'Fira Sans', '#', value: 'Fira Sans', class: "dropdown-item font-choice", style: 'font-family: Fira Sans' %></li>
                <li><%= link_to 'Fira Sans Bold', '#', value: 'Fira Sans Bold', class: "dropdown-item font-choice", style: 'font-family: Fira Sans Bold' %></li>
                <li><%= link_to 'Fira Mono', '#', value: 'Fira Mono', class: "dropdown-item font-choice", style: 'font-family: Fira Mono' %></li>
                <li><%= link_to 'Fira Mono Bold', '#', value: 'Fira Mono Bold', class: "dropdown-item font-choice", style: 'font-family: Fira Mono Bold' %></li>
                <li><%= link_to 'Fredoka One', '#', value: 'FredokaOne', class: "dropdown-item font-choice", style: 'font-family: FredokaOne' %></li>
                <li><%= link_to 'Chalkduster', '#', value: 'Chalkduster', class: "dropdown-item font-choice", style: 'font-family: Chalkduster' %></li>
                <li><%= link_to 'Times New Roman', '#', value: 'Times New Roman', class: "dropdown-item font-choice", style: 'font-family: Times New Roman' %></li>
                <li><%= link_to 'Times New Roman Bold', '#', value: 'Times New Roman Bold', class: "dropdown-item font-choice", style: 'font-family: Times New Roman Bold' %></li>
                <li><%= link_to 'Arimo Regular', '#', value: 'Arimo Regular', class: "dropdown-item font-choice", style: 'font-family: Arimo Regular' %></li>
                <li><%= link_to 'Clear Sans Regular', '#', value: 'Clear Sans Regular', class: "dropdown-item font-choice", style: 'font-family: Clear Sans Regular' %></li>
                <li><%= link_to 'Cousine Regular', '#', value: 'Cousine Regular', class: "dropdown-item font-choice", style: 'font-family: Cousine Regular' %></li>
                <li><%= link_to 'Droid Sans', '#', value: 'Droid Sans', class: "dropdown-item font-choice", style: 'font-family: Droid Sans' %></li>
                <li><%= link_to 'Noto Sans Regular', '#', value: 'Noto Sans Regular', class: "dropdown-item font-choice", style: 'font-family: Noto Sans Regular' %></li>
                <li><%= link_to 'Open Sans Regular', '#', value: 'Open Sans Regular', class: "dropdown-item font-choice", style: 'font-family: Open Sans Regular' %></li>
                <li><%= link_to 'Permanent Marker', '#', value: 'Permanent Marker', class: "dropdown-item font-choice", style: 'font-family: Permanent Marker' %></li>
                <li><%= link_to 'Roboto Bold', '#', value: 'Roboto Bold', class: "dropdown-item font-choice", style: 'font-family: Roboto Bold' %></li>
                <li><%= link_to 'Roboto Regular', '#', value: 'Roboto Regular', class: "dropdown-item font-choice", style: 'font-family: Roboto Regular' %></li>
                <li><%= link_to 'Roboto Slab Regular', '#', value: 'Roboto Slab Regular', class: "dropdown-item font-choice", style: 'font-family: Roboto Slab Regular' %></li>
                <li><%= link_to 'Roboto Thin', '#', value: 'Roboto Thin', class: "dropdown-item font-choice", style: 'font-family: Roboto Thin' %></li>
                <li><%= link_to 'Special Elite', '#', value: 'Special Elite', class: "dropdown-item font-choice", style: 'font-family: Special Elite' %></li>
                <li><%= link_to 'Source Han Sans Regular', '#', value: 'Source Han Sans Regular', class: "dropdown-item font-choice", style: 'font-family: Source Han Sans Regular' %></li>
                <li><%= link_to 'Tinos Regular', '#', value: 'Tinos Regular', class: "dropdown-item font-choice", style: 'font-family: Tinos Regular' %></li>
            </ul>

          </div>


          <div class="tab-pane fade" id="list-subscription" role="tabpanel" aria-labelledby="list-subscription-list">
      

<div class="subscription-plans d-flex flex-column flex-md-row justify-content-center align-items-stretch gap-4">
  <div class="plan-card free-plan d-flex flex-column position-relative overflow-hidden shadow-lg border border-3" style="border-color: #0951a9 !important; border-radius: 1.5rem !important; max-width: 350px; transition: transform 0.3s ease-in-out; min-height: 500px;">
    <div class="card-header bg-transparent text-center py-4 border-bottom-0">
      <h3 class="fw-bold mb-1 d-flex align-items-center justify-content-center gap-2">
        <%= image_tag "simple_cocktail.svg", size: "40x40", class: "img-fluid" %>
        Janitor
      </h3>
      <h4 style="color: #0951a9;">Free</h4>
    </div>
    <div class="card-body p-4 flex-grow-1">
      <p class="text-center text-muted mb-4">Basic plan for entry-level users. Get started with essential features at no cost.</p>
      <ul class="list-group list-group-flush">
        <li class="list-group-item border-0">✓ Limited access to core tools</li>
        <li class="list-group-item border-0">✓ Free daily usage quota</li>
        <li class="list-group-item border-0">✓ Community support forums</li>
        <li class="list-group-item border-0">✓ Basic analytics dashboard</li>
        <li class="list-group-item border-0">✓ Data used for service improvements *</li>
      </ul>
    </div>
    <div class="card-footer bg-transparent text-center border-top-0 pb-4 mt-auto">
      <%= link_to "Current Plan", "#", class: "btn btn-primary btn-lg w-100 disabled", aria: { disabled: true }, tabindex: -1, onclick: "return false;" %>
    </div>
    <style>
      .free-plan:hover { transform: scale(1.05); }
    </style>
  </div>

  <div class="plan-card paid-plan d-flex flex-column position-relative overflow-hidden shadow-lg border border-3" style="border-color: #0951a9 !important; border-radius: 1.5rem !important; max-width: 350px; transition: transform 0.3s ease-in-out; background: linear-gradient(to bottom, #f8f9fa, #ffffff); min-height: 500px;">
    <span class="position-absolute top-0 end-0 m-2 badge bg-primary text-white px-3 py-2 rounded-pill" style="background-color: #0951a9 !important; transform: translateY(-50%);">Recommended</span>
    <div class="card-header bg-transparent text-center py-4 border-bottom-0">
      <h3 class="fw-bold mb-1 d-flex align-items-center justify-content-center gap-2">
        <%= image_tag "rich_cocktail.svg", size: "40x40", class: "img-fluid" %>
        Pomologist
      </h3>
      <h4 style="color: #0951a9;">$7/month</h4>
    </div>
    <div class="card-body p-4 flex-grow-1">
      <p class="text-center text-muted mb-4">Advanced plan for professionals needing premium features and higher limits.</p>
      <ul class="list-group list-group-flush">
        <li class="list-group-item border-0">✓ Unlimited access to all tools</li>
        <li class="list-group-item border-0">✓ Priority support and consultations</li>
        <li class="list-group-item border-0">✓ Advanced customization options</li>
        <li class="list-group-item border-0">✓ Enhanced security features</li>
        <li class="list-group-item border-0">✓ Data not used for improvements *</li>
      </ul>
    </div>
   <div class="card-footer bg-transparent text-center border-top-0 pb-4 mt-auto">
    <%= button_to "Select", subscriptions_path,
                  method: :post,
                  data: { turbo: false },
                  class: "btn btn-primary btn-lg w-100" %>
  </div>
    <style>
      .paid-plan:hover { transform: scale(1.05); }
    </style>
  </div>
</div>








          </div>

        </div>
      </div>

</div>

<script>

$('.font-choice').on('click', function(e) {
  e.preventDefault(); 
  var t = $(this).attr('value'); 
  var actionurl = "/users/" + '<%=current_user.id%>' + "/update_font?font=" + t + "&authenticity_token=" + "<%=form_authenticity_token%>";
  $.post(actionurl);
});

</script>