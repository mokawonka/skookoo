<div class="page-container">

  <section class="hero-section">
    <h1>Order Merchandise with this Highlight</h1>
    <p>&ldquo;<%= @highlight.quote.truncate(100) %>&rdquo;</p>
  </section>

  <section class="merch-section">
    <div class="merch-container">
      <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4">

        <% products = [
          {name: "Shirt", image: "merch/shirt.png", description: "Premium cotton shirt with custom print"},
          {name: "Mug", image: "merch/mug.png", description: "Ceramic mug with durable quote engraving"},
          {name: "Hat", image: "merch/hat.png", description: "Adjustable cap with embroidered highlight"},
          {name: "Poster", image: "merch/poster.png", description: "High-quality matte poster print"}
        ] %>

        <% colors = [
          {name: "Orange", value: "#ff7a00"},
          {name: "Blue", value: "#0951a9"},
          {name: "Red", value: "#d90429"},
          {name: "Green", value: "#00a711"}
        ] %>

        <% products.each do |product| %>
          <div class="col">
            <div class="card">
              <div class="card-img-top">
                <%= image_tag product[:image], alt: product[:name], class: "img-fluid" %>
              </div>

              <div class="card-body text-center">
                <h5 class="card-title"><%= product[:name] %></h5>
                <p class="card-text"><%= product[:description] %></p>
                <p class="highlight-quote">"<%= @highlight.quote.truncate(60) %>"</p>

                <%= form_with model: @merch_order, url: merch_orders_path, local: true, class: "order-form" do |f| %>
                <%= f.hidden_field :highlight_id, value: @highlight.id %>
                <%= f.hidden_field :design_text, value: @highlight.quote %>
                <%= f.hidden_field :product_type, value: product[:name] %>

                <div class="color-picker">
                  <% colors.each_with_index do |color, index| %>
                    <label class="color-option">
                      <%= f.radio_button :color, color[:name], checked: index == 0 %>
                      <span class="color-circle" style="background-color:<%= color[:value] %>;"></span>
                    </label>
                  <% end %>
                </div>

                <div class="quantity-wrapper">
                  <label class="quantity-label">Quantity</label>
                  <%= f.number_field :quantity,
                        value: 1,
                        min: 1,
                        class: "form-control quantity-input" %>
                </div>

                <% if @existing_orders[product[:name]] %>
                  <button class="btn btn-placed mt-3" disabled>
                    âœ“ Pre-order placed
                  </button>
                <% else %>
                  <%= f.submit "Pre-order Now", class: "btn btn-order mt-3" %>
                <% end %>

              <% end %>

              </div>
            </div>
          </div>
        <% end %>

      </div>
    </div>
  </section>
</div>